<script>
  // Связываем названия файлов с активными мышцами
  const musclesByFile = {
    "Biceps brachii.svg": {
      primary: ["biceps_left", "biceps_right"],
      secondary: []
    },
    "Adductor Longus and Pectineus.svg": {
      primary: ["adductor_longus", "pectineus"],
      secondary: []
    }
  };

  const svgSelector = document.createElement("select");
  svgSelector.id = "svg-selector";

  Object.keys(musclesByFile).forEach(file => {
    const option = document.createElement("option");
    option.value = file;
    option.textContent = file.replace(".svg", "");
    svgSelector.appendChild(option);
  });

  document.body.insertBefore(svgSelector, document.getElementById("muscle-map"));

  const tooltip = document.getElementById("tooltip");
  const muscleMap = document.getElementById("muscle-map");

  function loadSVG(fileName) {
    fetch(fileName)
      .then(res => res.text())
      .then(svgText => {
        muscleMap.innerHTML = svgText;

        const muscles = musclesByFile[fileName];
        document.querySelectorAll(".primary, .secondary").forEach(el => {
          el.classList.remove("primary", "secondary");
        });

        muscles.primary.forEach(id => {
          const el = document.getElementById(id);
          if (el) el.classList.add("primary");
        });
        muscles.secondary.forEach(id => {
          const el = document.getElementById(id);
          if (el) el.classList.add("secondary");
        });

        document.querySelectorAll("#muscle-map g").forEach(g => {
          g.addEventListener("mouseenter", () => {
            const name = g.getAttribute("id") || "Unknown";
            tooltip.innerText = name;
            tooltip.style.display = "block";
          });

          g.addEventListener("mouseleave", () => {
            tooltip.style.display = "none";
          });

          g.addEventListener("mousemove", (e) => {
            tooltip.style.top = `${e.pageY + 10}px`;
            tooltip.style.left = `${e.pageX + 10}px`;
          });
        });
      });
  }

  svgSelector.addEventListener("change", (e) => {
    loadSVG(e.target.value);
  });

  loadSVG(svgSelector.value); // Загрузить SVG по умолчанию
</script>
